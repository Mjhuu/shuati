(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e9e4b2b"],{7156:function(e,t,r){var a=r("861d"),n=r("d2bb");e.exports=function(e,t,r){var s,o;return n&&"function"==typeof(s=t.constructor)&&s!==r&&a(o=s.prototype)&&o!==r.prototype&&n(e,o),e}},a9e3:function(e,t,r){"use strict";var a=r("83ab"),n=r("da84"),s=r("94ca"),o=r("6eeb"),i=r("5135"),c=r("c6b6"),l=r("7156"),u=r("c04e"),d=r("d039"),f=r("7c73"),p=r("241c").f,b=r("06cf").f,g=r("9bf2").f,h=r("58a8").trim,v="Number",w=n[v],m=w.prototype,I=c(f(m))==v,y=function(e){var t,r,a,n,s,o,i,c,l=u(e,!1);if("string"==typeof l&&l.length>2)if(l=h(l),t=l.charCodeAt(0),43===t||45===t){if(r=l.charCodeAt(2),88===r||120===r)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:a=2,n=49;break;case 79:case 111:a=8,n=55;break;default:return+l}for(s=l.slice(2),o=s.length,i=0;i<o;i++)if(c=s.charCodeAt(i),c<48||c>n)return NaN;return parseInt(s,a)}return+l};if(s(v,!w(" 0o1")||!w("0b1")||w("+0x1"))){for(var O,j=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof j&&(I?d((function(){m.valueOf.call(r)})):c(r)!=v)?l(new w(y(t)),r,j):y(t)},P=a?p(w):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;P.length>k;k++)i(w,O=P[k])&&!i(j,O)&&g(j,O,b(w,O));j.prototype=m,m.constructor=j,o(n,v,j)}},ddf9:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"other"},[r("van-nav-bar",{attrs:{title:"个人资料",fixed:"","left-text":"返回","left-arrow":""},on:{"click-left":function(t){return e.$router.back()}}}),r("van-tabs",[r("van-tab",{attrs:{title:"基本资料"}},[r("van-cell",{attrs:{title:"头像"}},[r("div",{staticStyle:{position:"relative",width:"6rem",height:"6rem",overflow:"hidden","border-radius":"50%",border:".1rem solid #f6f6f6",cursor:"pointer"},attrs:{slot:"right-icon"},slot:"right-icon"},[r("Avatar",{staticStyle:{width:"100%",height:"100%","object-fit":"cover"},attrs:{src:e.avatar,icon:"ios-person",size:"large"}}),r("input",{staticStyle:{position:"absolute",top:"0",right:"0",width:"100%",height:"100%",opacity:"0"},attrs:{type:"file"},on:{change:e.selectFile}})],1)]),r("van-field",{attrs:{value:e.userInfo.phone,disabled:"",label:"手机号"}}),r("van-field",{attrs:{maxlength:"20",placeholder:"请设置用户名",label:"用户名"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),r("van-radio-group",{model:{value:e.gender,callback:function(t){e.gender=t},expression:"gender"}},[r("van-cell-group",[r("van-cell",{attrs:{title:"男",clickable:""},on:{click:function(t){e.gender=1}}},[r("van-radio",{attrs:{slot:"right-icon",name:1},slot:"right-icon"})],1),r("van-cell",{attrs:{title:"女",clickable:""},on:{click:function(t){e.gender=0}}},[r("van-radio",{attrs:{slot:"right-icon",name:0},slot:"right-icon"})],1)],1)],1),r("div",{staticStyle:{padding:"2rem"}},[r("van-button",{staticStyle:{width:"100%"},attrs:{color:"linear-gradient(to right, #4bb0ff, #6149f6)"},on:{click:e.saveUserInfo}},[e._v("保存信息")])],1)],1),r("van-tab",{attrs:{title:"密码修改"}},[r("van-field",{staticStyle:{"margin-top":"1rem"},attrs:{placeholder:"请输入旧密码",type:"password",label:"旧密码"},model:{value:e.oldPassword,callback:function(t){e.oldPassword=t},expression:"oldPassword"}}),r("van-field",{staticStyle:{"margin-top":"1rem"},attrs:{placeholder:"请输入新密码",type:"password",label:"新密码"},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}}),r("div",{staticStyle:{padding:"2rem"}},[r("van-button",{staticStyle:{width:"100%"},attrs:{color:"linear-gradient(to right, #4bb0ff, #6149f6)"},on:{click:e.reviseUserPwd}},[e._v("修改密码")])],1)],1)],1)],1)},n=[],s=(r("a4d3"),r("4de4"),r("4160"),r("b0c0"),r("a9e3"),r("e439"),r("dbb4"),r("b64b"),r("d3b7"),r("ac1f"),r("5319"),r("159b"),r("96cf"),r("ade3")),o=r("2f62"),i=r("f121"),c=r("d399"),l=r("365c");function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){Object(s["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f={name:"Setting",data:function(){return{username:"",avatar:"",gender:1,oldPassword:"",newPassword:""}},computed:d({},Object(o["b"])(["userInfo"])),mounted:function(){var e=this;if(i["a"].getCache("userId")){var t=null;t=setInterval((function(){e.userInfo.id&&(e.avatar=e.userInfo.avatar,e.username=e.userInfo.username,e.gender=Number(e.userInfo.gender),clearInterval(t))}),10)}else this.$router.replace("/user")},methods:{saveUserInfo:function(){var e,t,r,a;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:if(e=this.avatar,t=this.username,r=this.gender,e){n.next=3;break}return n.abrupt("return",Object(c["a"])("请上传你的头像"));case 3:if(t){n.next=5;break}return n.abrupt("return",Object(c["a"])("请设置你的用户名"));case 5:return n.next=7,regeneratorRuntime.awrap(Object(l["I"])({avatar:e,username:t,gender:r,id:i["a"].getCache("userId")}));case 7:a=n.sent,200===a.code?(Object(c["a"])(a.data),this.$store.dispatch("addUserInfo",{userInfo:a.result.userInfo})):Object(c["a"])(a.data);case 9:case"end":return n.stop()}}),null,this)},reviseUserPwd:function(){var e,t,r;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:if(e=this.oldPassword,t=this.newPassword,e&&t){a.next=3;break}return a.abrupt("return",Object(c["a"])("请填写所有字段"));case 3:return console.log(e,t),a.next=6,regeneratorRuntime.awrap(Object(l["F"])({oldPassword:e,newPassword:t,id:i["a"].getCache("userId")}));case 6:r=a.sent,200===r.code?(Object(c["a"])(r.data),i["a"].delCache("userId"),this.$store.dispatch("addUserInfo",{userInfo:{}}),this.$router.replace("/user/login")):Object(c["a"])(r.data);case 8:case"end":return a.stop()}}),null,this)},selectFile:function(e){var t,r,a;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:if(t=e.target.files[0],"image/jpeg"===t.type||"image/jpg"===t.type||"image/png"===t.type||"image/gif"===t.type){n.next=3;break}return n.abrupt("return",Object(c["a"])("您上传的文件："+t.name+"格式不是png/jpg/jpeg/gif格式！请重新选择！"));case 3:if(!(t.size>10485760)){n.next=5;break}return n.abrupt("return",Object(c["a"])("您上传的文件："+t.name+"大小超过10M！请重新选择！"));case 5:return r=new FormData,r.append("file",t),n.next=9,regeneratorRuntime.awrap(Object(l["L"])(r));case 9:a=n.sent,200===a.code?this.avatar=a.result.url:Object(c["a"])("上传失败");case 11:case"end":return n.stop()}}),null,this)}}},p=f,b=r("2877"),g=Object(b["a"])(p,a,n,!1,null,"61b26ef5",null);t["default"]=g.exports},f121:function(e,t,r){"use strict";t["a"]={setCache:function(e,t){localStorage.setItem(e,t)},getCache:function(e){return localStorage.getItem(e)},delCache:function(e){localStorage.removeItem(e)}}}}]);
//# sourceMappingURL=chunk-4e9e4b2b.4b349a0a.js.map